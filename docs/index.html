<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Notion | Live Mission Control</title>
    <meta name="description"
        content="Real-time automated feed from the Auto-Notion repository. Track the evolution of hyperintelligent AI agents.">

    <!-- SEO & Social Sharing -->
    <meta property="og:title" content="Auto-Notion | Live Mission Control">
    <meta property="og:description"
        content="Real-time automated feed from the Auto-Notion repository. Track the evolution of hyperintelligent AI agents.">
    <meta property="og:image" content="https://auto-notion.web.app/preview.png?v=2">
    <meta property="og:url" content="https://auto-notion.web.app/logs">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://auto-notion.web.app/preview.png?v=2">

    <link rel="icon" type="image/png" href="https://auto-notion.web.app/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Inter"', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        'cupertino-bg': '#000000',
                        'cupertino-gray': '#1c1c1e',
                        'cupertino-text': '#f5f5f7',
                        'cupertino-blue': '#2997ff',
                        'cupertino-green': '#30d158',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out forwards',
                        'slide-up': 'slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(15px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: #050505;
            color: #f5f5f7;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        .glass {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .timeline-line {
            position: absolute;
            left: 23px;
            top: 12px;
            bottom: 0;
            width: 1px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.1), transparent);
        }

        .status-dot {
            box-shadow: 0 0 15px rgba(48, 209, 88, 0.4);
        }

        /* Ocean Animation - Restored Green */
        .ocean {
            height: 5%;
            width: 100%;
            position: fixed;
            bottom: 0;
            left: 0;
            background: #000000;
            z-index: -1;
            opacity: 1;
        }

        .wave {
            background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/85486/wave.svg) repeat-x;
            position: absolute;
            top: -198px;
            width: 6400px;
            height: 198px;
            animation: wave 7s cubic-bezier(0.36, 0.45, 0.63, 0.53) infinite;
            transform: translate3d(0, 0, 0);

            /* RESTORED VISIBILITY */
            opacity: 0.6;
            /* Deep, Rich Dark Green */
            filter: brightness(0.4) sepia(1) hue-rotate(75deg) saturate(4) contrast(1.3);
        }

        .wave:nth-of-type(2) {
            top: -175px;
            animation: wave 7s cubic-bezier(0.36, 0.45, 0.63, 0.53) -0.125s infinite, swell 7s ease -1.25s infinite;
            opacity: 0.3;
            filter: brightness(0.3) sepia(1) hue-rotate(65deg) saturate(5) contrast(1.2);
        }

        @keyframes wave {
            0% {
                margin-left: 0;
            }

            100% {
                margin-left: -1600px;
            }
        }

        @keyframes swell {

            0%,
            100% {
                transform: translate3d(0, -25px, 0);
            }

            50% {
                transform: translate3d(0, 5px, 0);
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(30, 80, 40, 0.5);
            border-radius: 3px;
        }
    </style>
</head>

<body class="selection:bg-cupertino-green/20 selection:text-white">

    <!-- Ocean Background -->
    <div class="ocean">
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass border-b border-white/5">
        <div class="max-w-4xl mx-auto px-6 h-14 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="https://auto-notion.web.app/logo.svg" alt="Logo"
                    class="w-6 h-6 object-contain opacity-70 grayscale hover:grayscale-0 transition-all duration-500">
                <span class="font-medium text-sm tracking-wide text-white/90">Auto-Notion</span>
            </div>
            <div class="flex items-center gap-6 text-[13px] font-medium text-white/50">
                <a href="#" class="text-cupertino-green hover:text-white transition-colors hidden sm:block">Mission
                    Control</a>
                <a href="https://auto-notion.web.app" target="_blank" class="hover:text-white transition-colors">Launch
                    App</a>
                <a href="https://github.com/opendev-labs/auto-notion" target="_blank"
                    class="hover:text-white transition-colors">Source</a>
            </div>
        </div>
    </nav>

    <!-- Content Container -->
    <div class="min-h-screen pt-24 pb-48 px-4 sm:px-12 flex justify-center relative z-10">

        <main class="w-full max-w-2xl">

            <!-- Header -->
            <header class="mb-12 text-center animate-slide-up" style="animation-delay: 0.1s;">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-cupertino-green/[0.05] border border-cupertino-green/20 mb-6 backdrop-blur-md">
                    <span class="relative flex h-2 w-2">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cupertino-green opacity-40"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-cupertino-green status-dot"></span>
                    </span>
                    <span class="text-[11px] font-medium text-cupertino-green uppercase tracking-wider">Systems
                        Nominal</span>
                </div>
                <h1 class="text-4xl sm:text-5xl font-semibold tracking-tight mb-4 text-white">
                    Live Mission Log
                </h1>
                <p class="text-white/40 text-sm max-w-md mx-auto leading-relaxed">
                    Real-time automated feed from the <span
                        class="text-cupertino-green/80 border-b border-cupertino-green/20">opendev-labs</span>
                    repository.
                </p>
            </header>

            <!-- Metrics Grid -->
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4 mb-16 animate-slide-up"
                style="animation-delay: 0.2s;">
                <div
                    class="glass rounded-lg p-4 sm:p-5 text-center transition-all hover:bg-white/[0.03] border border-white/10">
                    <div class="text-[10px] uppercase font-bold text-white/20 mb-1">Latest Release</div>
                    <div class="text-xl font-mono text-white/80">v4.1.0</div>
                </div>
                <div
                    class="glass rounded-lg p-4 sm:p-5 text-center transition-all hover:bg-white/[0.03] border border-white/10">
                    <div class="text-[10px] uppercase font-bold text-white/20 mb-1">Repo Status</div>
                    <div class="text-xl font-mono text-green-400">Active</div>
                </div>
                <div
                    class="col-span-2 sm:col-span-1 glass rounded-lg p-4 sm:p-5 text-center transition-all hover:bg-white/[0.03] border border-white/10">
                    <div class="text-[10px] uppercase font-bold text-white/20 mb-1">Last Sync</div>
                    <div class="text-xl font-mono text-white/80" id="last-sync">--:--</div>
                </div>
            </div>

            <!-- Feed Container -->
            <div class="animate-slide-up" style="animation-delay: 0.3s;">
                <div class="flex items-center justify-between mb-8 px-2">
                    <h2 class="text-lg font-semibold text-white/90">Transmission Feed</h2>
                    <span
                        class="text-[10px] font-mono text-white/20 uppercase bg-white/[0.03] px-2 py-1 rounded">Protocol:
                        GIT-REST-API</span>
                </div>

                <div class="relative pl-6" id="commit-feed">
                    <!-- Timeline Line -->
                    <div class="timeline-line"></div>

                    <!-- Loading Skeleton -->
                    <div class="animate-pulse space-y-8 pl-8">
                        <div class="h-32 bg-white/[0.03] rounded-lg border border-white/10"></div>
                        <div class="h-32 bg-white/[0.03] rounded-lg border border-white/10 opacity-50"></div>
                        <div class="h-32 bg-white/[0.03] rounded-lg border border-white/10 opacity-30"></div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts -->
    <script>
        const JSON_URL = './mission-log.json';

        async function fetchCommits() {
            try {
                const response = await fetch(JSON_URL);
                if (!response.ok) {
                    throw new Error('OFFLINE');
                }
                const commits = await response.json();
                renderCommits(commits);
                if (commits.length > 0) {
                    updateSyncTime(commits[0].date);
                }
            } catch (error) {
                console.error('Failed to load mission log:', error);
                document.getElementById('commit-feed').innerHTML = `
                    <div class="p-8 text-center glass rounded-lg border border-white/10 space-y-4">
                        <p class="text-white/40 text-xs font-bold uppercase tracking-widest">
                            Signal Lost. Unable to localize mission-log.json.
                        </p>
                        <button onclick="location.reload()" class="px-6 py-2 bg-white/5 border border-white/10 rounded-md text-[10px] font-black uppercase tracking-widest text-white/60 hover:text-white hover:bg-white/10 transition-all">
                            Reconnect
                        </button>
                    </div>
                `;
            }
        }

        function updateSyncTime(dateString) {
            const date = dateString ? new Date(dateString) : new Date();
            document.getElementById('last-sync').innerText = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function renderCommits(commits) {
            const feed = document.getElementById('commit-feed');
            const timeline = '<div class="timeline-line"></div>';

            // Filter out chore or empty commits if necessary, take first 15
            const items = commits
                .filter(c => !c.title.startsWith('chore:'))
                .slice(0, 15)
                .map((commit, index) => {
                    const isLatest = index === 0;
                    const title = commit.title;
                    const cleanTitle = title.replace(/^(feat|fix|style|docs|refactor)(\(.*\))?:/, '').trim();
                    const typeMatch = title.match(/^(feat|fix|style|docs|refactor)/);
                    const type = typeMatch ? typeMatch[0] : 'release';

                    const body = commit.body || '';
                    const commitDate = new Date(commit.date);

                    // Parsing detailed logic for "Client Log:"
                    let descriptiveTitle = cleanTitle;
                    let elaboratedDetail = 'Mission intelligence synchronized.';

                    if (body.includes('Client Log:')) {
                        const clientPart = body.split('Client Log:')[1];
                        elaboratedDetail = clientPart.trim();
                    } else if (body.trim()) {
                        elaboratedDetail = body.trim();
                    }

                    // Format: 2 Jan 2026 @ 18:01
                    const day = commitDate.getDate();
                    const month = commitDate.toLocaleString('en-GB', { month: 'short' });
                    const year = commitDate.getFullYear();
                    const date = `${day} ${month} ${year}`;
                    const time = commitDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false });

                    // Color coding for types
                    let typeColor = 'text-white/30 bg-white/5';
                    if (type === 'feat') typeColor = 'text-cupertino-green bg-cupertino-green/10';
                    if (type === 'fix') typeColor = 'text-red-400/80 bg-red-400/5';
                    if (type === 'docs') typeColor = 'text-blue-400/80 bg-blue-400/5';

                    return `
                    <div class="relative pl-10 pb-12 group last:pb-0">
                        <div class="absolute left-[18.5px] top-6 w-[9px] h-[9px] rounded-full bg-black border-[2px] ${isLatest ? 'border-white scale-110 shadow-[0_0_15px_rgba(255,255,255,0.2)]' : 'border-white/10 group-hover:border-white/40'} transition-all z-10"></div>
                        
                        <div class="glass rounded-lg p-6 transition-all duration-300 hover:bg-white/[0.02] hover:scale-[1.005] border border-white/10 opacity-0 animate-slide-up" style="animation-delay: ${index * 0.1}s">
                            
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="px-2.5 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide border ${typeColor}">
                                        ${type}
                                    </span>
                                    <span class="text-[11px] font-mono text-white/30">${date} @ <span class="text-white font-bold">${time}</span></span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <span class="text-[9px] font-mono text-white/20 uppercase tracking-widest hidden sm:block">Status: Verified</span>
                                    <span class="text-[10px] font-mono text-white/20">
                                        ${commit.hash}
                                    </span>
                                </div>
                            </div>

                            <h3 class="text-lg font-bold mb-3 leading-snug text-white tracking-wide uppercase text-sm">${descriptiveTitle}</h3>
                            
                            <div class="mt-4 pt-4 border-t border-white/10 text-sm text-white/60 leading-relaxed font-sans bg-white/[0.02] p-5 rounded-lg border border-white/5">
                                <div class="flex items-center gap-2 mb-3 text-[10px] uppercase tracking-[0.2em] font-black text-cupertino-green/60">
                                    Mission Detail
                                </div>
                                <p class="mb-0">${elaboratedDetail.replace(/\n/g, '<br>')}</p>
                            </div>
                        </div>
                    </div>
                `;
                }).join('');

            feed.innerHTML = timeline + items;
        }

        // Boot
        window.addEventListener('DOMContentLoaded', fetchCommits);
    </script>
</body>

</html>