<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Notion | Live Mission Control</title>
    <link rel="icon" type="image/svg+xml" href="https://auto-notion.web.app/logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Inter"', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        'cupertino-bg': '#000000',
                        'cupertino-gray': '#1c1c1e',
                        'cupertino-text': '#f5f5f7',
                        'cupertino-blue': '#2997ff',
                        'cupertino-green': '#30d158',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out forwards',
                        'slide-up': 'slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(15px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #000;
            color: #f5f5f7;
            -webkit-font-smoothing: antialiased;
        }

        .glass {
            background: rgba(28, 28, 30, 0.75);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-line {
            position: absolute;
            left: 23px;
            top: 12px;
            bottom: 0;
            width: 1px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.15), transparent);
        }

        .status-dot {
            box-shadow: 0 0 12px rgba(48, 209, 88, 0.5);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #000;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 3px;
        }
    </style>
</head>

<body class="selection:bg-cupertino-blue/30 selection:text-white">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass border-b border-white/5">
        <div class="max-w-4xl mx-auto px-6 h-14 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="https://auto-notion.web.app/logo.svg" alt="Logo" class="w-6 h-6 object-contain opacity-80">
                <span class="font-medium text-sm tracking-wide">Auto-Notion</span>
            </div>
            <div class="flex items-center gap-6 text-[13px] font-medium text-white/60">
                <a href="#" class="text-white hover:text-cupertino-blue transition-colors">Mission Control</a>
                <a href="https://auto-notion.web.app" target="_blank" class="hover:text-white transition-colors">Launch
                    App</a>
                <a href="https://github.com/opendev-labs/auto-notion" target="_blank"
                    class="hover:text-white transition-colors">Source</a>
            </div>
        </div>
    </nav>

    <div class="min-h-screen pt-32 pb-24 px-6 sm:px-12 flex justify-center">

        <main class="w-full max-w-2xl">

            <!-- Header -->
            <header class="mb-16 text-center animate-slide-up" style="animation-delay: 0.1s;">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-6">
                    <span class="relative flex h-2 w-2">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cupertino-green opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-cupertino-green status-dot"></span>
                    </span>
                    <span class="text-[11px] font-medium text-cupertino-green uppercase tracking-wider">Systems
                        Nominal</span>
                </div>
                <h1
                    class="text-4xl sm:text-5xl font-semibold tracking-tight mb-4 bg-clip-text text-transparent bg-gradient-to-b from-white to-white/60">
                    Live Mission Log
                </h1>
                <p class="text-white/40 text-sm max-w-md mx-auto leading-relaxed">
                    Real-time automated feed from the <span class="text-white/80 border-b border-white/20">OpenDev
                        Labs</span> repository.
                </p>
            </header>

            <!-- Metrics Grid -->
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-20 animate-slide-up" style="animation-delay: 0.2s;">
                <div class="glass rounded-2xl p-5 text-center transition-all hover:bg-white/5">
                    <div class="text-[10px] uppercase font-bold text-white/30 mb-1">Latest Release</div>
                    <div class="text-xl font-mono text-white/90">v4.1.0</div>
                </div>
                <div class="glass rounded-2xl p-5 text-center transition-all hover:bg-white/5">
                    <div class="text-[10px] uppercase font-bold text-white/30 mb-1">Repo Status</div>
                    <div class="text-xl font-mono text-cupertino-green">Active</div>
                </div>
                <div class="col-span-2 sm:col-span-1 glass rounded-2xl p-5 text-center transition-all hover:bg-white/5">
                    <div class="text-[10px] uppercase font-bold text-white/30 mb-1">Last Sync</div>
                    <div class="text-xl font-mono text-white/90" id="last-sync">--:--</div>
                </div>
            </div>

            <!-- Feed Container -->
            <div class="animate-slide-up" style="animation-delay: 0.3s;">
                <div class="flex items-center justify-between mb-8 px-2">
                    <h2 class="text-lg font-semibold">Transmission Feed</h2>
                    <span class="text-[10px] font-mono text-white/30 uppercase bg-white/5 px-2 py-1 rounded">Protocol:
                        GIT-REST-API</span>
                </div>

                <div class="relative pl-6" id="commit-feed">
                    <!-- Timeline Line -->
                    <div class="timeline-line"></div>

                    <!-- Loading Skeleton -->
                    <div class="animate-pulse space-y-8 pl-8">
                        <div class="h-32 bg-white/5 rounded-3xl"></div>
                        <div class="h-32 bg-white/5 rounded-3xl opacity-50"></div>
                        <div class="h-32 bg-white/5 rounded-3xl opacity-30"></div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts -->
    <script>
        const REPO = 'opendev-labs/auto-notion';
        const API_URL = `https://api.github.com/repos/${REPO}/commits`;

        async function fetchCommits() {
            try {
                const response = await fetch(API_URL);
                const commits = await response.json();
                renderCommits(commits);
                updateSyncTime();
            } catch (error) {
                console.error('Failed to fetch commits:', error);
                document.getElementById('commit-feed').innerHTML = `
                    <div class="p-6 text-center text-white/40 glass rounded-2xl">
                        Signal Lost. Unable to establish link with GitHub API.
                    </div>
                `;
            }
        }

        function updateSyncTime() {
            const now = new Date();
            document.getElementById('last-sync').innerText = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function renderCommits(commits) {
            const feed = document.getElementById('commit-feed');
            const timeline = '<div class="timeline-line"></div>';

            // Take first 10 commits
            const items = commits.slice(0, 10).map((commit, index) => {
                const isLatest = index === 0;
                const messageParts = commit.commit.message.split('\n\n');
                const title = messageParts[0];
                const cleanTitle = title.replace(/^(feat|fix|style|chore|docs|refactor)(\(.*\))?:/, '').trim();
                const typeMatch = title.match(/^(feat|fix|style|chore|docs|refactor)/);
                const type = typeMatch ? typeMatch[0] : 'misc';
                const body = messageParts.length > 1 ? messageParts.slice(1).join('\n') : '';
                const date = new Date(commit.commit.author.date).toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' });
                const author = commit.commit.author.name;

                // Color coding for types
                let typeColor = 'text-white/40 bg-white/5';
                if (type === 'feat') typeColor = 'text-cupertino-blue bg-cupertino-blue/10';
                if (type === 'fix') typeColor = 'text-red-400 bg-red-400/10';
                if (type === 'docs') typeColor = 'text-orange-400 bg-orange-400/10';

                return `
                    <div class="relative pl-10 pb-12 group last:pb-0">
                        <!-- Node Dot -->
                        <div class="absolute left-[18.5px] top-6 w-[9px] h-[9px] rounded-full bg-black border-[2px] ${isLatest ? 'border-cupertino-green scale-110 shadow-[0_0_10px_rgba(48,209,88,0.4)]' : 'border-white/20 group-hover:border-white/60'} transition-all z-10"></div>
                        
                        <div class="glass rounded-3xl p-6 transition-all duration-300 hover:bg-white/[0.08] hover:scale-[1.01] hover:shadow-2xl opacity-0 animate-slide-up" style="animation-delay: ${index * 0.1}s">
                            
                            <!-- Header -->
                            <div class="flex flex-wrap items-center justify-between gap-3 mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide ${typeColor}">
                                        ${type}
                                    </span>
                                    <span class="text-[11px] font-mono text-white/30">${date}</span>
                                </div>
                                <a href="${commit.html_url}" target="_blank" class="text-[10px] font-mono text-white/20 hover:text-white transition-colors">
                                    ${commit.sha.substring(0, 7)} â†—
                                </a>
                            </div>

                            <!-- Content -->
                            <h3 class="text-lg font-medium mb-2 leading-snug">${cleanTitle}</h3>
                            
                            ${body ? `
                                <div class="mt-4 pt-4 border-t border-white/5 text-sm text-white/50 leading-relaxed font-light">
                                    ${body.replace(/\n/g, '<br>')}
                                </div>
                            ` : ''}

                            <div class="mt-4 flex items-center gap-2">
                                <div class="w-5 h-5 rounded-full bg-gradient-to-tr from-white/10 to-white/5 flex items-center justify-center text-[10px] font-bold text-white/40">
                                    ${author.charAt(0)}
                                </div>
                                <span class="text-xs text-white/30">${author}</span>
                            </div>

                        </div>
                    </div>
                `;
            }).join('');

            feed.innerHTML = timeline + items;
        }

        // Boot
        window.addEventListener('DOMContentLoaded', fetchCommits);
    </script>

</body>

</html>